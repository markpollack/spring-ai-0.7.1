<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Prompts :: Spring AI Reference</title>
    <link rel="prev" href="clients/huggingface.html">
    <link rel="next" href="output-parser.html">
    <meta name="generator" content="Antora 3.2.0-alpha.2">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/vendor/search.css">
    <link rel="stylesheet" href="../_/css/vendor/asciidoctor-tabs.css">

    <meta name="version" content="0.7.1">
    <meta name="component" content="ai">
    <link rel="icon" href="../_/img/favicon.ico" type="image/vnd.microsoft.icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://spring.io">
        <img
          id="springlogo"
          class="block"
          src="../_/img/spring-logo.svg"
          alt="Spring"
        />
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Why Spring</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/why-spring"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/microservices"
            >Microservices</a>
            <a
              class="navbar-item"
              href="https://spring.io/reactive"
            >Reactive</a>
            <a class="navbar-item" href="https://spring.io/event-driven">Event
              Driven</a>
            <a class="navbar-item" href="https://spring.io/cloud">Cloud</a>
            <a class="navbar-item" href="https://spring.io/web-applications">Web
              Applications</a>
            <a
              class="navbar-item"
              href="https://spring.io/serverless"
            >Serverless</a>
            <a class="navbar-item" href="https://spring.io/batch">Batch</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Learn</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/learn">Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/quickstart"
            >Quickstart</a>
            <a class="navbar-item" href="https://spring.io/guides">Guides</a>
            <a class="navbar-item" href="https://spring.io/blog">Blog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a
              class="navbar-item"
              href="https://spring.io/projects"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-boot"
            >Spring Boot</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-framework"
            >Spring Framework</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud"
            >Spring Cloud</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud-dataflow"
            >Spring Cloud Data Flow</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-data"
            >Spring Data</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-integration"
            >Spring Integration</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-batch"
            >Spring Batch</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-security"
            >Spring Security</a>
            <a
              class="navbar-item navbar-item-special"
              href="https://spring.io/projects"
            >View all projects</a>
            <a class="navbar-item" href="https://spring.io/tools">Spring Tools 4</a>
            <a
              class="navbar-item navbar-item-special-2"
              href="https://start.spring.io"
            >Spring Initializr
              <svg
                class="external-link-icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
              ><polyline
                  points="15 10.94 15 15 1 15 1 1 5.06 1"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><polyline
                  points="8.93 1 15 1 15 7.07"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><line
                  x1="15"
                  y1="1"
                  x2="8"
                  y2="8"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></line></svg></a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Academy</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.academy/courses"
            >Courses</a>
            <a
              class="navbar-item"
              href="https://spring.academy/learning-path"
            >Get Certified</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Solutions</a>
          <div class="navbar-dropdown lg">
            <a class="navbar-item" href="https://spring.io/solutions">Overview</a>
            <a class="navbar-item" href="https://spring.io/runtime">Spring Runtime</a>
            <a class="navbar-item" href="https://spring.io/consulting">Spring Consulting</a>
            <a class="navbar-item" href="https://spring.academy/teams">Spring Academy For Teams</a>
            <a class="navbar-item" href="https://spring.io/security">Security Advisories</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable is-community">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/community"
            >Overview</a>
            <a class="navbar-item" href="https://spring.io/events">Events</a>
            <a class="navbar-item" href="https://spring.io/team">Team</a>
          </div>
        </div>
      </div>
    </div>
    <label class="theme-toggler">
      <input
        type="checkbox"
        type="checkbox"
        id="switch-theme-checkbox"
        name="switch-theme-checkbox"
      />
      <span class="icon"><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="moon"
          class="svg-inline--fa fa-moon moon"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 384 512"
        ><path
            fill="currentColor"
            d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"
          ></path>
        </svg>
        <svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="sun"
          class="svg-inline--fa fa-sun sun"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        ><path
            fill="currentColor"
            d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"
          ></path>
        </svg></span>
      <span class="text">light</span>
    </label>
  </nav>
</header>
<script>
!function (theme) {
  if (theme === 'dark') {
    document.getElementById('switch-theme-checkbox').parentElement.classList.add('active')
  }
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
</script><div class="body">
<div class="nav-container" data-component="ai" data-version="0.7.1">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">Spring AI</span>
  <span class="version">0.7.1-SNAPSHOT</span>
  <button class="browse-version" id="browse-version">
    <svg
      height="24px"
      id="Layer_1"
      style="enable-background:new 0 0 512 512;"
      version="1.1"
      viewBox="0 0 512 512"
      width="24px"
      xml:space="preserve"
    ><g><path
          d="M256,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S273.7,224,256,224L256,224z"
        ></path><path
          d="M128.4,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S146,224,128.4,224L128.4,224z"
        ></path><path
          d="M384,224c-17.7,0-32,14.3-32,32s14.3,32,32,32s32-14.3,32-32S401.7,224,384,224L384,224z"
        ></path></g></svg>
  </button>
</div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../concepts.html">AI Concepts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Spring AI API</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="aiclient.html">AiClient</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="clients/huggingface.html">HuggingFace</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="prompt.html">Prompts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="output-parser.html">Output Parsers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="etl-pipeline.html">ETL Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="embeddings.html">EmbeddingClient</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="embeddings/onnx.html">ONNX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="vectordbs.html">Vector Databases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/azure.html">Azure AI Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/chroma.html">Chroma</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/milvus.html">Milvus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/neo4j.html">Neo4j</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/pgvector.html">PGvector</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/weaviate.html">Weaviate</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing.html">Evaluation Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Appendices</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title="Prompts"
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
        <a href="file:///home/mark/projects/spring-ai/spring-ai-docs/src/main/antora/modules/ROOT/pages/api/prompt.adoc">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24"
            viewBox="0 0 24 24"
            width="24"
          ><path
              d="m16 2.012 3 3L16.713 7.3l-3-3zM4 14v3h3l8.299-8.287-3-3zm0 6h16v2H4z"
            ></path></svg>
          Edit this Page
        </a>
        <a href="https://github.com/markpollack/spring-ai" title="Github">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="512px"
            id="Layer_1"
            version="1.1"
            viewBox="0 0 512 512"
            width="512px"
          ><style type="text/css"><![CDATA[
              .st0{fill-rule:evenodd;clip-rule:evenodd;} ]]></style><g><path
                class="st0"
                d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"
              ></path></g></svg>
          Github Project
        </a>
    </div>
  </div>
</aside><div class="doc">
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Spring AI</a></li>
    <li><a href="index.html">Spring AI API</a></li>
    <li><a href="prompt.html">Prompts</a></li>
  </ul>
</nav>
<article>
<h1 id="page-title" class="page">Prompts</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Prompts are the inputs that guide an AI model to generate specific outputs.
The design and phrasing of these prompts significantly influence the model&#8217;s responses.</p>
</div>
<div class="paragraph">
<p>At the lowest level of interaction with AI models in Spring AI, handling prompts in Spring AI is somewhat similar to managing the "View" in Spring MVC.
This involves creating extensive text with placeholders for dynamic content.
These placeholders are then replaced based on user requests or other code in application.
Another analogy is with SQL statement that contain placeholders for certain expressions.</p>
</div>
<div class="paragraph">
<p>As Spring AI evolves, it will introduce higher levels of abstraction for interacting with AI models.
The foundational classes described in this section can be likened to JDBC in terms of their role and functionality.
The <code>AiClient</code> class, for instance, is analogous to the core JDBC library in the JDK.
Building upon this, Spring AI can provide helper classes similar to <code>JdbcTemplate</code>, Spring Data Repositories, and eventually, more advanced constructs like ChatEngines and Agents that consider past interactions with the model.</p>
</div>
<div class="paragraph">
<p>The structure of prompts has evolved over time within the AI field.
Initially, prompts were simple strings.
Over time, they have evolved to include placeholders for specific inputs, like "USER:", which the AI model recognizes.
OpenAI have introduced even more structure to prompts by categorizing multiple message strings into distinct roles before they are processed by the AI model.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_overview"><a class="anchor" href="#_api_overview"></a>API Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prompt"><a class="anchor" href="#_prompt"></a>Prompt</h3>
<div class="paragraph">
<p>It is common to use <code>AiClient`s `generate</code> method which takes a <code>Prompt</code> instance and returns an <code>AiResponse</code>.</p>
</div>
<div class="paragraph">
<p>The Prompt class functions as a container for an organized series of Message objects, with each one forming a segment of the overall prompt.
Every Message embodies a unique role within the prompt, differing in its content and intent.
These roles can encompass a variety of elements, from user inquiries to AI-generated responses or relevant background information.
This arrangement enables intricate and detailed interactions with AI models, as the prompt is constructed from multiple messages, each assigned a specific role to play in the dialogue.</p>
</div>
<div class="paragraph">
<p>Below is a truncated version of the Prompt class, with constructors and utility methods omitted for brevity:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Prompt {

    private final List&lt;Message&gt; messages;

    // constructors and utility methods omitted
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_message"><a class="anchor" href="#_message"></a>Message</h3>
<div class="paragraph">
<p>The <code>Message</code> interface encapsulates a textual message, a collection of attributes as a <code>Map</code>, and a categorization known as <code>MessageType</code>. The interface is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Message {

   String getContent();

   Map&lt;String, Object&gt; getProperties();

   MessageType getMessageType();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Various implementations of the <code>Message</code> interface correspond to different categories of messages that an AI model can process. Some models, like those from OpenAI, distinguish between message categories based on conversational roles. These roles are effectively mapped by the <code>MessageType</code>, as discussed below.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_roles"><a class="anchor" href="#_roles"></a>Roles</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The evolution of prompts in AI has transitioned from basic, straightforward text to more organized and complex formats with specific roles and structures.</p>
</div>
<div class="paragraph">
<p>Initially, prompts were simple strings – just lines of text.
Over time, this evolved to include specific placeholders within these strings, like “USER:”, which the AI model could recognize and respond to accordingly.
This was a step towards more structured prompts.</p>
</div>
<div class="paragraph">
<p>OpenAI then introduced an even more organized approach.
In their model, prompts are not merely single strings but a series of messages.
Each message, while still in text form, is assigned a specific role.
These roles categorize the messages, clarifying the context and purpose of each segment of the prompt for the AI model.
This structured approach enhances the nuance and effectiveness of communication with the AI, as each part of the prompt plays a distinct and defined role in the interaction.</p>
</div>
<div class="paragraph">
<p>The primary roles are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>System Role: Guides the AI&#8217;s behavior and response style, setting parameters or rules for how the AI interprets and replies to the input. It&#8217;s akin to providing instructions to the AI before initiating a conversation.</p>
</li>
<li>
<p>User Role: Represents the user&#8217;s input – their questions, commands, or statements to the AI. This role is fundamental as it forms the basis of the AI&#8217;s response.</p>
</li>
<li>
<p>Assistant Role: The AI&#8217;s response to the user&#8217;s input. More than just an answer or reaction, it&#8217;s crucial for maintaining the flow of the conversation. By tracking the AI&#8217;s previous responses (its 'Assistant Role' messages), the system ensures coherent and contextually relevant interactions.
Function Role: This role deals with specific tasks or operations during the conversation. While the System Role sets the AI&#8217;s overall behavior, the Function Role focuses on carrying out certain actions or commands the user asks for. It&#8217;s like a special feature in the AI, used when needed to perform specific functions such as calculations, fetching data, or other tasks beyond just talking. This role allows the AI to offer practical help in addition to conversational responses.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Roles are represented as an enumeration in Spring AI as shown below</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public enum MessageType {

	USER("user"),

	ASSISTANT("assistant"),

	SYSTEM("system"),

	FUNCTION("function");

	private final String value;

	MessageType(String value) {
		this.value = value;
	}

	public String getValue() {
		return value;
	}

	public static MessageType fromValue(String value) {
		for (MessageType messageType : MessageType.values()) {
			if (messageType.getValue().equals(value)) {
				return messageType;
			}
		}
		throw new IllegalArgumentException("Invalid MessageType value: " + value);
	}

}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_prompttemplate"><a class="anchor" href="#_prompttemplate"></a>PromptTemplate</h3>
<div class="paragraph">
<p>A key component for prompt templating in Spring AI is the <code>PromptTemplate</code> class.
This class uses the StringTemplate engine, developed by Terence Parr, for constructing and managing prompts.
The <code>PromptTemplate</code> class is designed to facilitate the creation of structured prompts that are then sent to the AI model for processing</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class PromptTemplate implements PromptTemplateActions, PromptTemplateMessageActions {

    // Other methods to be discussed later
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The interfaces implemented by this class support different aspects of prompt creation:</p>
</div>
<div class="paragraph">
<p><code>PromptTemplateStringActions</code> focuses on creating and rendering prompt strings, representing the most basic form of prompt generation.</p>
</div>
<div class="paragraph">
<p><code>PromptTemplateMessageActions</code> is tailored for prompt creation through the generation and manipulation of Message objects.</p>
</div>
<div class="paragraph">
<p><code>PromptTemplateActions</code> is designed to return the Prompt object, which can be passed to AiClient for generating a response.</p>
</div>
<div class="paragraph">
<p>While these interfaces might not be used extensively in many projects, they show the different approaches to prompt creation.</p>
</div>
<div class="paragraph">
<p>The implemented interfaces are</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface PromptTemplateStringActions {

	String render();

	String render(Map&lt;String, Object&gt; model);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>String render()</code> renders a prompt template into a final string format without external input, suitable for templates without placeholders or dynamic content.</p>
</div>
<div class="paragraph">
<p>The method <code>String render(Map&lt;String, Object&gt; model)</code>: Enhances rendering functionality to include dynamic content. It uses a Map&lt;String, Object&gt; where map keys are placeholder names in the prompt template, and values are the dynamic content to be inserted.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface PromptTemplateMessageActions {

	Message createMessage();

	Message createMessage(Map&lt;String, Object&gt; model);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>Message createMessage()</code>: Creates a Message object without additional data, used for static or predefined message content.</p>
</div>
<div class="paragraph">
<p>The method <code>Message createMessage(Map&lt;String, Object&gt; model)</code>: Extends message creation to integrate dynamic content, accepting a Map&lt;String, Object&gt; where each entry represents a placeholder in the message template and its corresponding dynamic value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface PromptTemplateActions extends PromptTemplateStringActions {

	Prompt create();

	Prompt create(Map&lt;String, Object&gt; model);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The method <code>Prompt create()</code>: Generates a Prompt object without external data inputs, ideal for static or predefined prompts.</p>
</div>
<div class="paragraph">
<p>The method <code>Prompt create(Map&lt;String, Object&gt; model)</code>: Expands prompt creation capabilities to include dynamic content, taking a Map&lt;String, Object&gt; where each map entry is a placeholder in the prompt template and its associated dynamic value.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_usage"><a class="anchor" href="#_example_usage"></a>Example Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A simple example taken from the <a href="https://github.com/Azure-Samples/spring-ai-azure-workshop/blob/main/2-README-prompt-templating.md">AI Workshop on PromptTemplates</a> is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PromptTemplate promptTemplate = new PromptTemplate("Tell me a {adjective} joke about {topic}");

Prompt prompt = promptTemplate.create(Map.of("adjective", adjective, "topic", topic));

return aiClient.generate(prompt).getGeneration();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another example taken from the <a href="https://github.com/Azure-Samples/spring-ai-azure-workshop/blob/main/3-README-prompt-roles.md">AI Workshop on Roles</a> is shown below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String userText = """
    Tell me about three famous pirates from the Golden Age of Piracy and why they did.
    Write at least a sentence for each pirate.
    """;

Message userMessage = new UserMessage(userText);

String systemText = """
  You are a helpful AI assistant that helps people find information.
  Your name is {name}
  You should reply to the user's request with your name and also in the style of a {voice}.
  """;

SystemPromptTemplate systemPromptTemplate = new SystemPromptTemplate(systemText);
Message systemMessage = systemPromptTemplate.createMessage(Map.of("name", name, "voice", voice));

Prompt prompt = new Prompt(List.of(userMessage, systemMessage));

List&lt;Generation&gt; response = aiClient.generate(prompt).getGenerations();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This shows how you can build up the <code>Prompt</code> instance by using the <code>SystemPromptTemplate to create a `Message</code> with the system role passing in placeholder values.
The message with the role <code>user</code> is then combined with the message of the role <code>system</code> to form the form the prompt.
The prompt is then passed to the AiClient to get a generative response.</p>
</div>
<div class="sect2">
<h3 id="_using_resources_instead_of_raw_strings"><a class="anchor" href="#_using_resources_instead_of_raw_strings"></a>Using resources instead of raw Strings</h3>
<div class="paragraph">
<p>Spring AI supports the <code>org.springframework.core.io.Resource</code> abstraction so you can put prompt data in a file that can directly be used in PromptTemplates.
For example, you can define a field in your Spring managed component to retrieve the Resource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Value("classpath:/prompts/system-message.st")
private Resource systemResource;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and then pass that resource to the <code>SystemPromptTemplate</code> directly.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">SystemPromptTemplate systemPromptTemplate = new SystemPromptTemplate(systemResource);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prompt_engineering"><a class="anchor" href="#_prompt_engineering"></a>Prompt Engineering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In generative AI, the creation of prompts is a crucial task for developers.
The quality and structure of these prompts significantly influence the effectiveness of the AI&#8217;s output.
Investing time and effort in designing thoughtful prompts can greatly improve the results from the AI.</p>
</div>
<div class="paragraph">
<p>Sharing and discussing prompts is a common practice in the AI community.
This collaborative approach not only creates a shared learning environment but also leads to the identification and use of highly effective prompts.</p>
</div>
<div class="paragraph">
<p>Research in this area often involves analyzing and comparing different prompts to assess their effectiveness in various situations.
For example, a significant study demonstrated that starting a prompt with "Take a deep breath and work on this problem step by step" significantly enhanced problem-solving efficiency.
This highlights the impact that well-chosen language can have on generative AI systems' performance.</p>
</div>
<div class="paragraph">
<p>Grasping the most effective use of prompts, particularly with the rapid advancement of AI technologies, is a continuous challenge.
You should recognize the importance of prompt engineering and consider using insights from the community and research to improve their prompt creation strategies.</p>
</div>
<div class="sect2">
<h3 id="_creating_effective_prompts"><a class="anchor" href="#_creating_effective_prompts"></a>Creating effective prompts</h3>
<div class="paragraph">
<p>When developing prompts, it&#8217;s important to integrate several key components to ensure clarity and effectiveness:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Instructions</strong>: Offer clear and direct instructions to the AI, similar to how you would communicate with a person. This clarity is essential for helping the AI understand what is expected.</p>
</li>
<li>
<p><strong>External Context</strong>: nclude relevant background information or specific guidance for the AI&#8217;s response when necessary. This 'external context' frames the prompt and aids the AI in grasping the overall scenario.</p>
</li>
<li>
<p><strong>User Input</strong>: This is the straightforward part - the user&#8217;s direct request or question forming the core of the prompt.</p>
</li>
<li>
<p><strong>Output Indicator</strong>: This aspect can be tricky. It involves specifying the desired format for the AI&#8217;s response, such as JSON. However, be aware that the AI might not always adhere strictly to this format. For instance, it might prepend a phrase like "here is your JSON" before the actual JSON data, or sometimes generate a JSON-like structure that is not accurate.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Providing the AI with examples of the anticipated question and answer format can be highly beneficial when crafting prompts.
This practice helps the AI 'understand' the structure and intent of your query, leading to more precise and relevant responses.
While this documentation does not delve deeply into these techniques, they provide a starting point for further exploration in AI prompt engineering.</p>
</div>
<div class="paragraph">
<p>Here is a list of resources for further investigation</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simple_techniques"><a class="anchor" href="#_simple_techniques"></a>Simple Techniques</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong><a href="https://www.promptingguide.ai/introduction/examples.en#text-summarization">Text Summarization</a></strong>:<br>
Reduces extensive text into concise summaries, capturing key points and main ideas while omitting less critical details.</p>
</li>
<li>
<p><strong><a href="https://www.promptingguide.ai/introduction/examples.en#question-answering">Question Answering</a></strong>:<br>
Focuses on deriving specific answers from provided text, based on user-posed questions. It&#8217;s about pinpointing and extracting relevant information in response to queries.</p>
</li>
<li>
<p><strong><a href="https://www.promptingguide.ai/introduction/examples.en#text-classification">Text Classification</a></strong>:<br>
Systematically categorizes text into predefined categories or groups, analyzing the text and assigning it to the most fitting category based on its content.</p>
</li>
<li>
<p><strong><a href="https://www.promptingguide.ai/introduction/examples.en#conversation">Conversation</a></strong>:<br>
Creates interactive dialogues where the AI can engage in back-and-forth communication with users, simulating a natural conversation flow.</p>
</li>
<li>
<p><strong><a href="https://www.promptingguide.ai/introduction/examples.en#code-generation">Code Generation</a></strong>:<br>
Generates functional code snippets based on specific user requirements or descriptions, translating natural language instructions into executable code.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_techniques"><a class="anchor" href="#_advanced_techniques"></a>Advanced Techniques</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong><a href="https://www.promptingguide.ai/techniques/zeroshot">Zero-shot</a>, <a href="https://www.promptingguide.ai/techniques/fewshot">Few-shot Learning</a></strong>:<br>
Enables the model to make accurate predictions or responses with minimal to no prior examples of the specific problem type, understanding and acting on new tasks using learned generalizations.</p>
</li>
<li>
<p><strong><a href="https://www.promptingguide.ai/techniques/cot">Chain-of-Thought</a></strong>:<br>
Links multiple AI responses to create a coherent and contextually aware conversation. It helps the AI maintain the thread of the discussion, ensuring relevance and continuity.</p>
</li>
<li>
<p><strong><a href="https://www.promptingguide.ai/techniques/react">ReAct (Reason + Act)</a></strong>:<br>
In this method, the AI first analyzes (reasons about) the input, then determines the most appropriate course of action or response. It combines understanding with decision-making.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microsoft_guidance"><a class="anchor" href="#_microsoft_guidance"></a>Microsoft Guidance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><strong><a href="https://github.com/microsoft/guidance">Framework for Prompt Creation and Optimization</a></strong>:<br>
Microsoft offers a structured approach to developing and refining prompts. This framework guides users in creating effective prompts that elicit the desired responses from AI models, optimizing the interaction for clarity and efficiency.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tokens"><a class="anchor" href="#_tokens"></a>Tokens</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tokens are essential in how AI models process text, acting as a bridge that converts words (as we understand them) into a format that AI models can process.
This conversion occurs in two stages: words are transformed into tokens upon input, and these tokens are then converted back into words in the output.</p>
</div>
<div class="paragraph">
<p>Tokenization, the process of breaking down text into tokens, is fundamental to how AI models comprehend and process language.
The AI model works with this tokenized format to understand and respond to prompts.</p>
</div>
<div class="paragraph">
<p>To better understand tokens, think of them as portions of words. Typically, a token represents about three-quarters of a word. For instance, the complete works of Shakespeare, totaling roughly 900,000 words, would translate to around 1.2 million tokens.</p>
</div>
<div class="paragraph">
<p>Experiment with the <a href="https://platform.openai.com/tokenizer">OpenAI Tokenizer UI</a> to see how words are converted into tokens.</p>
</div>
<div class="paragraph">
<p>Tokens have practical implications beyond their technical role in AI processing, especially regarding billing and model capabilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Billing: AI model services often bill based on token usage. Both the input (prompt) and the output (response) contribute to the total token count, making shorter prompts more cost-effective.</p>
</li>
<li>
<p>Model Limits: Different AI models have varying token limits, defining their "context window" – the maximum amount of information they can process at a time. For example, GPT-3&#8217;s limit is 4K tokens, while other models like Claude 2 and Meta Llama 2 have limits of 100K tokens, and some research models can handle up to 1 million tokens.</p>
</li>
<li>
<p>Context Window: A model&#8217;s token limit determines its context window. Inputs exceeding this limit are not processed by the model. It&#8217;s crucial to send only the minimal effective set of information for processing. For example, when inquiring about "Hamlet," there&#8217;s no need to include tokens from all of Shakespeare&#8217;s other works.</p>
</li>
<li>
<p>Response Metadata: The metadata of a response from an AI model includes the number of tokens used, a vital piece of information for managing usage and costs.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="clients/huggingface.html">HuggingFace</a></span>
  <span class="next"><a href="output-parser.html">Output Parsers</a></span>
</nav>
</article>
</div>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1h{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1h" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1h" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
              <div class="colset">
                <div class="col-left">
                  <ul class="nav-versions">
                    <li class="component is-current">
                      <a class="title" href="../index.html">Spring AI</a>
                      <ul class="versions">
                        <li class="version is-current is-latest">
                          <a href="../index.html">
                            0.7.1-SNAPSHOT<span class="current">current</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="col-right">
                  <ul>
                    <li>
                      Related Spring Documentation
                      <ul>
                        <li><a href="https://docs.spring.io/spring-framework/reference/">Spring Framework</a></li>
                        <li>
                          Spring Data
                          <ul>
                            <li><a href="https://docs.spring.io/spring-data-commons/reference/">Spring Data Commons</a></li>
                            <li><a href="https://docs.spring.io/spring-data-jpa/reference/">Spring Data JPA</a></li>
                          </ul>
                        </li>
                        <li><a href="https://docs.spring.io/spring-integration/reference/">Spring Integration</a></li>
                        <li><a href="https://docs.spring.io/spring-batch/reference/">Spring Batch</a></li>
                        <li>
                          <a href="https://docs.spring.io/spring-security/reference/">Spring Security</a>
                          <ul>
                            <li><a href="https://docs.spring.io/spring-ldap/reference/">Spring LDAP</a></li>
                            <li><a href="https://docs.spring.io/spring-session/reference/">Spring Session</a></li>
                            <li><a href="https://docs.spring.io/spring-authorization-server/reference/">Spring Authorization Server</a></li>
                            <li><a href="https://docs.spring.io/spring-vault/reference/">Spring Vault</a></li>
                            <li><a href="https://docs.spring.io/spring-security-kerberos/reference/">Spring Security Kerberos</a></li>
                          </ul>
                        </li>
                        <li><a href="https://docs.spring.io/spring-ai/reference/">Spring AI</a></li>
                        <li><a href="https://docs.spring.io/spring-cli/reference/">Spring CLI</a></li>
                        <li><a href="https://docs.spring.io/spring-graphql/reference/">Spring GraphQL</a></li>
                        <li><a href="https://docs.spring.io/spring-shell/reference/">Spring Shell</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="footer flex">
    <div id="spring-links flex">
        <img id="springlogo" src="../_/img/spring-logo.svg" alt="Spring">
        <p class="smallest antialiased">© <script>var d = new Date();
        document.write(d.getFullYear());</script> <a href="https://www.vmware.com/">VMware</a>, Inc. or its affiliates. <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> • <a href="https://www.vmware.com/help/privacy.html" rel="noopener noreferrer">Privacy</a> • <a href="https://spring.io/trademarks">Trademark Guidelines</a> <span id="thank-you-mobile">• <a href="https://spring.io/thank-you">Thank you</a></span> • <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> • <a class="ot-sdk-show-settings">Cookie Settings</a> <span id="teconsent"></span></p>
        <p class="smallest antialiased has-gray-text">Apache®, Apache Tomcat®, Apache Kafka®, Apache Cassandra&trade;, and Apache Geode&trade; are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java&trade;, Java&trade; SE, Java&trade; EE, and OpenJDK&trade; are trademarks of Oracle and/or its affiliates. Kubernetes® is a registered trademark of the Linux Foundation in the United States and other countries. Linux® is the registered trademark of Linus Torvalds in the United States and other countries. Windows® and Microsoft® Azure are registered trademarks of Microsoft Corporation. “AWS” and “Amazon Web Services” are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.</p>
    </div>
    <div id="social-icons" class="flex jc-between">
        <a href="https://www.youtube.com/user/SpringSourceDev" title="Youtube"><svg id="youtube-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle class="cls-1" cx="20" cy="20" r="20"/><path class="cls-2" d="M30.91,14.53a2.89,2.89,0,0,0-2-2C27.12,12,20,12,20,12s-7.12,0-8.9.47a2.9,2.9,0,0,0-2,2A30.56,30.56,0,0,0,8.63,20a30.44,30.44,0,0,0,.46,5.47,2.89,2.89,0,0,0,2,2C12.9,28,20,28,20,28s7.12,0,8.9-.47a2.87,2.87,0,0,0,2-2A30.56,30.56,0,0,0,31.37,20,28.88,28.88,0,0,0,30.91,14.53ZM17.73,23.41V16.59L23.65,20Z"/></svg></a>
        <a href="https://github.com/spring-projects" title="Github"><svg id="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><path class="cls-1" d="M38,0a38,38,0,1,0,38,38A38,38,0,0,0,38,0Z"/></g><path class="cls-2" d="M38,15.59A22.95,22.95,0,0,0,30.71,60.3c1.15.21,1.57-.5,1.57-1.11s0-2,0-3.9c-6.38,1.39-7.73-3.07-7.73-3.07A6.09,6.09,0,0,0,22,48.86c-2.09-1.42.15-1.39.15-1.39a4.81,4.81,0,0,1,3.52,2.36c2,3.5,5.37,2.49,6.67,1.91a4.87,4.87,0,0,1,1.46-3.07c-5.09-.58-10.45-2.55-10.45-11.34a8.84,8.84,0,0,1,2.36-6.15,8.29,8.29,0,0,1,.23-6.07s1.92-.62,6.3,2.35a21.82,21.82,0,0,1,11.49,0c4.38-3,6.3-2.35,6.3-2.35a8.29,8.29,0,0,1,.23,6.07,8.84,8.84,0,0,1,2.36,6.15c0,8.81-5.37,10.75-10.48,11.32a5.46,5.46,0,0,1,1.56,4.25c0,3.07,0,5.54,0,6.29s.42,1.33,1.58,1.1A22.94,22.94,0,0,0,38,15.59Z"/></svg></a>
        <a href="https://twitter.com/springcentral" title="Twitter"><svg id="twitter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><circle class="cls-1" cx="37.97" cy="37.97" r="37.97"/><path id="Twitter-2" data-name="Twitter" class="cls-2" d="M55.2,22.73a15.43,15.43,0,0,1-4.88,1.91,7.56,7.56,0,0,0-5.61-2.49A7.78,7.78,0,0,0,37,30a7.56,7.56,0,0,0,.2,1.79,21.63,21.63,0,0,1-15.84-8.23,8,8,0,0,0,2.37,10.52,7.66,7.66,0,0,1-3.48-1v.09A7.84,7.84,0,0,0,26.45,41a7.54,7.54,0,0,1-2,.28A7.64,7.64,0,0,1,23,41.09a7.71,7.71,0,0,0,7.18,5.47,15.21,15.21,0,0,1-9.55,3.37,15.78,15.78,0,0,1-1.83-.11,21.41,21.41,0,0,0,11.78,3.54c14.13,0,21.86-12,21.86-22.42,0-.34,0-.68,0-1a15.67,15.67,0,0,0,3.83-4.08,14.9,14.9,0,0,1-4.41,1.24A7.8,7.8,0,0,0,55.2,22.73Z"/></svg></a>
    </div>
</footer>
<script src="../_/js/vendor/import.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/asciidoctor-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>
  </body>
</html>
