<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AiClient :: Spring AI Reference</title>
    <link rel="prev" href="index.html">
    <link rel="next" href="clients/huggingface.html">
    <meta name="generator" content="Antora 3.2.0-alpha.2">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/vendor/search.css">
    <link rel="stylesheet" href="../_/css/vendor/asciidoctor-tabs.css">

    <meta name="version" content="0.7.1">
    <meta name="component" content="ai">
    <link rel="icon" href="../_/img/favicon.ico" type="image/vnd.microsoft.icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://spring.io">
        <img
          id="springlogo"
          class="block"
          src="../_/img/spring-logo.svg"
          alt="Spring"
        />
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Why Spring</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/why-spring"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/microservices"
            >Microservices</a>
            <a
              class="navbar-item"
              href="https://spring.io/reactive"
            >Reactive</a>
            <a class="navbar-item" href="https://spring.io/event-driven">Event
              Driven</a>
            <a class="navbar-item" href="https://spring.io/cloud">Cloud</a>
            <a class="navbar-item" href="https://spring.io/web-applications">Web
              Applications</a>
            <a
              class="navbar-item"
              href="https://spring.io/serverless"
            >Serverless</a>
            <a class="navbar-item" href="https://spring.io/batch">Batch</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Learn</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/learn">Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/quickstart"
            >Quickstart</a>
            <a class="navbar-item" href="https://spring.io/guides">Guides</a>
            <a class="navbar-item" href="https://spring.io/blog">Blog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a
              class="navbar-item"
              href="https://spring.io/projects"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-boot"
            >Spring Boot</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-framework"
            >Spring Framework</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud"
            >Spring Cloud</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud-dataflow"
            >Spring Cloud Data Flow</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-data"
            >Spring Data</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-integration"
            >Spring Integration</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-batch"
            >Spring Batch</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-security"
            >Spring Security</a>
            <a
              class="navbar-item navbar-item-special"
              href="https://spring.io/projects"
            >View all projects</a>
            <a class="navbar-item" href="https://spring.io/tools">Spring Tools 4</a>
            <a
              class="navbar-item navbar-item-special-2"
              href="https://start.spring.io"
            >Spring Initializr
              <svg
                class="external-link-icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
              ><polyline
                  points="15 10.94 15 15 1 15 1 1 5.06 1"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><polyline
                  points="8.93 1 15 1 15 7.07"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><line
                  x1="15"
                  y1="1"
                  x2="8"
                  y2="8"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></line></svg></a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Academy</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.academy/courses"
            >Courses</a>
            <a
              class="navbar-item"
              href="https://spring.academy/learning-path"
            >Get Certified</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Solutions</a>
          <div class="navbar-dropdown lg">
            <a class="navbar-item" href="https://spring.io/solutions">Overview</a>
            <a class="navbar-item" href="https://spring.io/runtime">Spring Runtime</a>
            <a class="navbar-item" href="https://spring.io/consulting">Spring Consulting</a>
            <a class="navbar-item" href="https://spring.academy/teams">Spring Academy For Teams</a>
            <a class="navbar-item" href="https://spring.io/security">Security Advisories</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable is-community">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/community"
            >Overview</a>
            <a class="navbar-item" href="https://spring.io/events">Events</a>
            <a class="navbar-item" href="https://spring.io/team">Team</a>
          </div>
        </div>
      </div>
    </div>
    <label class="theme-toggler">
      <input
        type="checkbox"
        type="checkbox"
        id="switch-theme-checkbox"
        name="switch-theme-checkbox"
      />
      <span class="icon"><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="moon"
          class="svg-inline--fa fa-moon moon"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 384 512"
        ><path
            fill="currentColor"
            d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"
          ></path>
        </svg>
        <svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="sun"
          class="svg-inline--fa fa-sun sun"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        ><path
            fill="currentColor"
            d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"
          ></path>
        </svg></span>
      <span class="text">light</span>
    </label>
  </nav>
</header>
<script>
!function (theme) {
  if (theme === 'dark') {
    document.getElementById('switch-theme-checkbox').parentElement.classList.add('active')
  }
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
</script><div class="body">
<div class="nav-container" data-component="ai" data-version="0.7.1">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">Spring AI</span>
  <span class="version">0.7.1-SNAPSHOT</span>
  <button class="browse-version" id="browse-version">
    <svg
      height="24px"
      id="Layer_1"
      style="enable-background:new 0 0 512 512;"
      version="1.1"
      viewBox="0 0 512 512"
      width="24px"
      xml:space="preserve"
    ><g><path
          d="M256,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S273.7,224,256,224L256,224z"
        ></path><path
          d="M128.4,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S146,224,128.4,224L128.4,224z"
        ></path><path
          d="M384,224c-17.7,0-32,14.3-32,32s14.3,32,32,32s32-14.3,32-32S401.7,224,384,224L384,224z"
        ></path></g></svg>
  </button>
</div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Overview</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../concepts.html">AI Concepts</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Spring AI API</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="aiclient.html">AiClient</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="clients/huggingface.html">HuggingFace</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="prompt.html">Prompts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="output-parser.html">Output Parsers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="etl-pipeline.html">ETL Pipeline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="embeddings.html">EmbeddingClient</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="embeddings/onnx.html">ONNX</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="vectordbs.html">Vector Databases</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/azure.html">Azure AI Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/chroma.html">Chroma</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/milvus.html">Milvus</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/neo4j.html">Neo4j</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/pgvector.html">PGvector</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="vectordbs/weaviate.html">Weaviate</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="testing.html">Evaluation Testing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Appendices</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title="AiClient"
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
        <a href="file:///home/mark/projects/spring-ai/spring-ai-docs/src/main/antora/modules/ROOT/pages/api/aiclient.adoc">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24"
            viewBox="0 0 24 24"
            width="24"
          ><path
              d="m16 2.012 3 3L16.713 7.3l-3-3zM4 14v3h3l8.299-8.287-3-3zm0 6h16v2H4z"
            ></path></svg>
          Edit this Page
        </a>
        <a href="https://github.com/markpollack/spring-ai" title="Github">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="512px"
            id="Layer_1"
            version="1.1"
            viewBox="0 0 512 512"
            width="512px"
          ><style type="text/css"><![CDATA[
              .st0{fill-rule:evenodd;clip-rule:evenodd;} ]]></style><g><path
                class="st0"
                d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"
              ></path></g></svg>
          Github Project
        </a>
    </div>
  </div>
</aside><div class="doc">
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Spring AI</a></li>
    <li><a href="index.html">Spring AI API</a></li>
    <li><a href="aiclient.html">AiClient</a></li>
  </ul>
</nav>
<article>
<h1 id="page-title" class="page">AiClient</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The <code>AiClient</code> interface streamlines interactions with <a href="../concepts.html#_models" class="xref page">AI Models</a>.
It simplifies connecting to various AI Models -— each with potentially unique APIs -— by offering a uniform interface for interaction.</p>
</div>
<div class="paragraph">
<p>Currently, the interface supports only text-based input and output.
You should expect some of the classes and interfaces to change as we add other input and output types.</p>
</div>
<div class="paragraph">
<p>The design of the <code>AiClient</code> interface centers around two primary goals:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Portability</strong>: It allows easy integration with different AI Models, letting developers switch between differing AI models with minimal code changes.
This design aligns with Spring&#8217;s philosophy of modularity and interchangeability.</p>
</li>
<li>
<p><strong>Simplicity</strong>: By using companion classes like <code>Prompt</code> for input encapsulation and <code>AiResponse</code> for output handling, the <code>AiClient</code> interface simplifies communication with AI Models. It manages the complexity of request preparation and response parsing, offering a direct and simplified API interaction.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_overview"><a class="anchor" href="#_api_overview"></a>API Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides a guide to the <code>AiClient</code> interface and associated classes.</p>
</div>
<div class="sect2">
<h3 id="_aiclient"><a class="anchor" href="#_aiclient"></a>AiClient</h3>
<div class="paragraph">
<p>Here is the <code>AiClient</code> interface definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface AiClient {

    default String generate(String message) { // implementation omitted
    }

    AiResponse generate(Prompt prompt);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>generate</code> method with a <code>String</code> parameter simplifies initial use, avoiding the complexities of the more sophisticated <code>Prompt</code> and <code>AiResponse</code> classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_prompt"><a class="anchor" href="#_prompt"></a>Prompt</h3>
<div class="paragraph">
<p>In a real-world application, it is most common to use the <code>generate</code> method, taking a <code>Prompt</code> instance and returning an <code>AiResponse</code>.</p>
</div>
<div class="paragraph">
<p>The <code>Prompt</code> class encapsulates a list of <code>Message</code> objects.
The following listing shows a truncated version of the Prompt class, excluding constructors and other utility methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Prompt {

    private final List&lt;Message&gt; messages;

    // constructors and utility methods omitted
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_message"><a class="anchor" href="#_message"></a>Message</h3>
<div class="paragraph">
<p>The <code>Message</code> interface encapsulates a textual message, a collection of attributes as a <code>Map</code>, and a categorization known as <code>MessageType</code>. The interface is defined as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Message {

   String getContent();

   Map&lt;String, Object&gt; getProperties();

   MessageType getMessageType();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Message</code> interface has various implementations that correspond to the categories of messages that an AI model can process.
Some models, like OpenAI&#8217;s chat completion endpoint, distinguish between message categories based on conversational roles, effectively mapped by the <code>MessageType</code>.</p>
</div>
<div class="paragraph">
<p>For instance, OpenAI recognizes message categories for distinct conversational roles such as &#8220;system,&#8221; &#8220;user,&#8221; or &#8220;assistant.&#8221;
While the term, <code>MessageType</code>, might imply a specific message format, in this context, it effectively designates the role a message plays in the dialogue.</p>
</div>
<div class="paragraph">
<p>For AI models that do not use specific roles, the <code>UserMessage</code> implementation acts as a standard category, typically representing user-generated inquiries or instructions.
To understand the practical application and the relationship between <code>Prompt</code> and <code>Message</code>, especially in the context of these roles or message categories, see the detailed explanations in the <a href="#Prompts">[Prompts]</a> section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_airesponse"><a class="anchor" href="#_airesponse"></a>AiResponse</h3>
<div class="paragraph">
<p>The structure of the <code>AiResponse</code> class is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class AiResponse {

	private final List&lt;Generation&gt; generations;

    // other methods omitted
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>AiResponse</code> class holds the AI Model&#8217;s output, with each <code>Generation</code> instance containing one of potentially multiple outputs from a single prompt.</p>
</div>
<div class="paragraph">
<p>The <code>AiResponse</code> class also carries a map of key-value pairs providing metadata about the AI Model&#8217;s response. This feature is still in progress and is not elaborated on in this document.</p>
</div>
</div>
<div class="sect2">
<h3 id="_generation"><a class="anchor" href="#_generation"></a>Generation</h3>
<div class="paragraph">
<p>Finally, the <code>Generation</code> class contains a <code>String</code> that represents the output text and a map that provides metadata about this response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class Generation {

	private final String text;

	private Map&lt;String, Object&gt; info;

}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_available_implementations"><a class="anchor" href="#_available_implementations"></a>Available Implementations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>AiClient</code> interface has the following available implementations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OpenAI: Using the <a href="https://github.com/TheoKanning/openai-java">Theo Kanning client library</a>.</p>
</li>
<li>
<p>Azure OpenAI: Using <a href="https://learn.microsoft.com/en-us/java/api/overview/azure/ai-openai-readme?view=azure-java-preview">Microsoft&#8217;s OpenAI client library</a>.</p>
</li>
<li>
<p>Hugging Face: Using the <a href="https://huggingface.co/inference-endpoints">Hugging Face Hosted Inference Service</a>.  This gives you access to hundreds of models.</p>
</li>
<li>
<p><a href="https://ollama.ai/">Ollama</a>: Run large language models locally.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Planned implementations
* Amazon Bedrock: This can provide access to many AI models.
* Google Vertex: Providing access to 'Bard' (AKA Palm2).</p>
</div>
<div class="paragraph">
<p>Others are welcome. The list is not at all closed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openai_compatible_models"><a class="anchor" href="#_openai_compatible_models"></a>OpenAI-Compatible Models</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A variety of models compatible with the OpenAI API are available, including those that can be operated locally, such as [LocalAI](<a href="https://github.com/mudler/LocalAI" class="bare">github.com/mudler/LocalAI</a>). The standard configuration for connecting to the OpenAI API is through the <code>spring.ai.openai.baseUrl</code> property, which defaults to <code><a href="https://api.openai.com" class="bare">api.openai.com</a></code>.</p>
</div>
<div class="paragraph">
<p>To link the OpenAI client to a compatible model that uses the OpenAI API, you should adjust the <code>spring.ai.openai.baseUrl</code> property to the corresponding URL of the model you wish to connect to.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration"><a class="anchor" href="#_configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to configure models, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#openai-api">OpenAI</a></p>
</li>
<li>
<p><a href="#azure-openai-api">Azure OpenAI</a></p>
</li>
<li>
<p><a href="#hugging-face-api">Hugging Face</a></p>
</li>
<li>
<p><a href="#ollama-api">Ollama</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="openan-api"><a class="anchor" href="#openan-api"></a>OpenAI</h3>
<div class="paragraph">
<p>Add the Spring Boot starter to you project&#8217;s dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework.experimental.ai&lt;/groupId&gt;
        &lt;artifactId&gt;spring-ai-azure-openai-spring-boot-starter&lt;/artifactId&gt;
        &lt;version&gt;0.7.1-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This makes an instance of the <code>AiClient</code> that is backed by the <a href="https://github.com/TheoKanning/openai-java">Theo Kanning client library</a> available for injection in your application classes.</p>
</div>
<div class="paragraph">
<p>The Spring AI project defines a configuration property named <code>spring.ai.openai.api-key</code> that you should set to the value of the <code>API Key</code> obtained from <code>openai.com</code>.</p>
</div>
<div class="paragraph">
<p>Exporting an environment variable is one way to set that configuration property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">export SPRING_AI_OPENAI_API_KEY=&lt;INSERT KEY HERE&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="azure-openai-api"><a class="anchor" href="#azure-openai-api"></a>Azure OpenAI</h3>
<div class="paragraph">
<p>This makes an instance of the <code>AiClient</code> that is backed by <a href="https://learn.microsoft.com/en-us/java/api/overview/azure/ai-openai-readme?view=azure-java-preview">Microsoft&#8217;s OpenAI client library</a> available for injection in your application classes.</p>
</div>
<div class="paragraph">
<p>The Spring AI project defines a configuration property named <code>spring.ai.azure.openai.api-key</code> that you should set to the value of the <code>API Key</code> obtained from Azure.
There is also a configuration property named <code>spring.ai.azure.openai.endpoint</code> that you should set to the endpoint URL obtained when provisioning your model in Azure.</p>
</div>
<div class="paragraph">
<p>Exporting environment variables is one way to set these configuration properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">export SPRING_AI_AZURE_OPENAI_API_KEY=&lt;INSERT KEY HERE&gt;
export SPRING_AI_AZURE_OPENAI_ENDPOINT=&lt;INSERT ENDPOINT URL HERE&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="hugging-face-api"><a class="anchor" href="#hugging-face-api"></a>Hugging Face</h3>
<div class="paragraph">
<p>There is not yet a Spring Boot Starter for this client implementation, so you should add the dependency to the HuggingFace client implementation to your project&#8217;s dependencies and export an environment variable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.experimental.ai&lt;/groupId&gt;
  &lt;artifactId&gt;spring-ai-huggingface&lt;/artifactId&gt;
  &lt;version&gt;0.7.1-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">export HUGGINGFACE_API_KEY=your_api_key_here</code></pre>
</div>
</div>
<div class="paragraph">
<p>Obtain the endpoint URL of the inference endpoint. You can find this on the Inference Endpoint&#8217;s UI <a href="https://ui.endpoints.huggingface.co/">here</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="ollama-api"><a class="anchor" href="#ollama-api"></a>Ollama</h3>
<div class="paragraph">
<p>There is not yet a Spring Boot Starter for this client implementation, so you should add the dependency to the Ollama client implementation to your project&#8217;s dependencies:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.experimental.ai&lt;/groupId&gt;
  &lt;artifactId&gt;spring-ai-ollama&lt;/artifactId&gt;
  &lt;version&gt;0.7.1-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_usage"><a class="anchor" href="#_example_usage"></a>Example Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following listing shows a simple "Hello, world" example. It uses the <code>AiClient.generate</code> method that takes a <code>String</code> as input and returns a <code>String</code> as output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RestController
public class SimpleAiController {

    private final AiClient aiClient;

    @Autowired
    public SimpleAiController(AiClient aiClient) {
        this.aiClient = aiClient;
    }

    @GetMapping("/ai/generate")
    public Map generate(@RequestParam(value = "message", defaultValue = "Tell me a joke") String message) {
        return Map.of("generation", aiClient.generate(message));
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_best_practices"><a class="anchor" href="#_best_practices"></a>Best Practices</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_troubleshooting"><a class="anchor" href="#_troubleshooting"></a>Troubleshooting</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_docs"><a class="anchor" href="#_api_docs"></a>API Docs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can find the Javadoc <a href="https://docs.spring.io/spring-ai/docs/current-SNAPSHOT/">here</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_feedback_and_contributions"><a class="anchor" href="#_feedback_and_contributions"></a>Feedback and Contributions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The project&#8217;s <a href="https://github.com/spring-projects-experimental/spring-ai/discussions">GitHub discussions</a> is a great place to send feedback.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_related_resources"><a class="anchor" href="#_related_resources"></a>Related Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">Spring AI API</a></span>
  <span class="next"><a href="clients/huggingface.html">HuggingFace</a></span>
</nav>
</article>
</div>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1h{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1h" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1h" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
              <div class="colset">
                <div class="col-left">
                  <ul class="nav-versions">
                    <li class="component is-current">
                      <a class="title" href="../index.html">Spring AI</a>
                      <ul class="versions">
                        <li class="version is-current is-latest">
                          <a href="../index.html">
                            0.7.1-SNAPSHOT<span class="current">current</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="col-right">
                  <ul>
                    <li>
                      Related Spring Documentation
                      <ul>
                        <li><a href="https://docs.spring.io/spring-framework/reference/">Spring Framework</a></li>
                        <li>
                          Spring Data
                          <ul>
                            <li><a href="https://docs.spring.io/spring-data-commons/reference/">Spring Data Commons</a></li>
                            <li><a href="https://docs.spring.io/spring-data-jpa/reference/">Spring Data JPA</a></li>
                          </ul>
                        </li>
                        <li><a href="https://docs.spring.io/spring-integration/reference/">Spring Integration</a></li>
                        <li><a href="https://docs.spring.io/spring-batch/reference/">Spring Batch</a></li>
                        <li>
                          <a href="https://docs.spring.io/spring-security/reference/">Spring Security</a>
                          <ul>
                            <li><a href="https://docs.spring.io/spring-ldap/reference/">Spring LDAP</a></li>
                            <li><a href="https://docs.spring.io/spring-session/reference/">Spring Session</a></li>
                            <li><a href="https://docs.spring.io/spring-authorization-server/reference/">Spring Authorization Server</a></li>
                            <li><a href="https://docs.spring.io/spring-vault/reference/">Spring Vault</a></li>
                            <li><a href="https://docs.spring.io/spring-security-kerberos/reference/">Spring Security Kerberos</a></li>
                          </ul>
                        </li>
                        <li><a href="https://docs.spring.io/spring-ai/reference/">Spring AI</a></li>
                        <li><a href="https://docs.spring.io/spring-cli/reference/">Spring CLI</a></li>
                        <li><a href="https://docs.spring.io/spring-graphql/reference/">Spring GraphQL</a></li>
                        <li><a href="https://docs.spring.io/spring-shell/reference/">Spring Shell</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="footer flex">
    <div id="spring-links flex">
        <img id="springlogo" src="../_/img/spring-logo.svg" alt="Spring">
        <p class="smallest antialiased">© <script>var d = new Date();
        document.write(d.getFullYear());</script> <a href="https://www.vmware.com/">VMware</a>, Inc. or its affiliates. <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> • <a href="https://www.vmware.com/help/privacy.html" rel="noopener noreferrer">Privacy</a> • <a href="https://spring.io/trademarks">Trademark Guidelines</a> <span id="thank-you-mobile">• <a href="https://spring.io/thank-you">Thank you</a></span> • <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> • <a class="ot-sdk-show-settings">Cookie Settings</a> <span id="teconsent"></span></p>
        <p class="smallest antialiased has-gray-text">Apache®, Apache Tomcat®, Apache Kafka®, Apache Cassandra&trade;, and Apache Geode&trade; are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java&trade;, Java&trade; SE, Java&trade; EE, and OpenJDK&trade; are trademarks of Oracle and/or its affiliates. Kubernetes® is a registered trademark of the Linux Foundation in the United States and other countries. Linux® is the registered trademark of Linus Torvalds in the United States and other countries. Windows® and Microsoft® Azure are registered trademarks of Microsoft Corporation. “AWS” and “Amazon Web Services” are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.</p>
    </div>
    <div id="social-icons" class="flex jc-between">
        <a href="https://www.youtube.com/user/SpringSourceDev" title="Youtube"><svg id="youtube-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle class="cls-1" cx="20" cy="20" r="20"/><path class="cls-2" d="M30.91,14.53a2.89,2.89,0,0,0-2-2C27.12,12,20,12,20,12s-7.12,0-8.9.47a2.9,2.9,0,0,0-2,2A30.56,30.56,0,0,0,8.63,20a30.44,30.44,0,0,0,.46,5.47,2.89,2.89,0,0,0,2,2C12.9,28,20,28,20,28s7.12,0,8.9-.47a2.87,2.87,0,0,0,2-2A30.56,30.56,0,0,0,31.37,20,28.88,28.88,0,0,0,30.91,14.53ZM17.73,23.41V16.59L23.65,20Z"/></svg></a>
        <a href="https://github.com/spring-projects" title="Github"><svg id="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><path class="cls-1" d="M38,0a38,38,0,1,0,38,38A38,38,0,0,0,38,0Z"/></g><path class="cls-2" d="M38,15.59A22.95,22.95,0,0,0,30.71,60.3c1.15.21,1.57-.5,1.57-1.11s0-2,0-3.9c-6.38,1.39-7.73-3.07-7.73-3.07A6.09,6.09,0,0,0,22,48.86c-2.09-1.42.15-1.39.15-1.39a4.81,4.81,0,0,1,3.52,2.36c2,3.5,5.37,2.49,6.67,1.91a4.87,4.87,0,0,1,1.46-3.07c-5.09-.58-10.45-2.55-10.45-11.34a8.84,8.84,0,0,1,2.36-6.15,8.29,8.29,0,0,1,.23-6.07s1.92-.62,6.3,2.35a21.82,21.82,0,0,1,11.49,0c4.38-3,6.3-2.35,6.3-2.35a8.29,8.29,0,0,1,.23,6.07,8.84,8.84,0,0,1,2.36,6.15c0,8.81-5.37,10.75-10.48,11.32a5.46,5.46,0,0,1,1.56,4.25c0,3.07,0,5.54,0,6.29s.42,1.33,1.58,1.1A22.94,22.94,0,0,0,38,15.59Z"/></svg></a>
        <a href="https://twitter.com/springcentral" title="Twitter"><svg id="twitter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><circle class="cls-1" cx="37.97" cy="37.97" r="37.97"/><path id="Twitter-2" data-name="Twitter" class="cls-2" d="M55.2,22.73a15.43,15.43,0,0,1-4.88,1.91,7.56,7.56,0,0,0-5.61-2.49A7.78,7.78,0,0,0,37,30a7.56,7.56,0,0,0,.2,1.79,21.63,21.63,0,0,1-15.84-8.23,8,8,0,0,0,2.37,10.52,7.66,7.66,0,0,1-3.48-1v.09A7.84,7.84,0,0,0,26.45,41a7.54,7.54,0,0,1-2,.28A7.64,7.64,0,0,1,23,41.09a7.71,7.71,0,0,0,7.18,5.47,15.21,15.21,0,0,1-9.55,3.37,15.78,15.78,0,0,1-1.83-.11,21.41,21.41,0,0,0,11.78,3.54c14.13,0,21.86-12,21.86-22.42,0-.34,0-.68,0-1a15.67,15.67,0,0,0,3.83-4.08,14.9,14.9,0,0,1-4.41,1.24A7.8,7.8,0,0,0,55.2,22.73Z"/></svg></a>
    </div>
</footer>
<script src="../_/js/vendor/import.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/asciidoctor-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>
  </body>
</html>
